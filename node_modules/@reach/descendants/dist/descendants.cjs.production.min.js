"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react"),t=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,r=require("@reach/utils");function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}exports.DescendantProvider=function(e){var r=e.context,a=e.children,i=e.items,c=e.set,u=n.useCallback((function(e){var n=e.element,t=e.index,r=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}(e,["element","index"]);n&&c((function(e){var a;if(null!=t)a=[].concat(e,[o(o({},r),{},{element:n,index:t})]);else if(0===e.length)a=[].concat(e,[o(o({},r),{},{element:n,index:0})]);else if(e.find((function(e){return e.element===n})))a=e;else{var i=e.findIndex((function(e){return!(!e.element||!n)&&Boolean(e.element.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING)})),c=o(o({},r),{},{element:n,index:i});a=-1===i?[].concat(e,[c]):[].concat(e.slice(0,i),[c],e.slice(i))}return a.map((function(e,n){return o(o({},e),{},{index:n})}))}))}),[]),s=n.useCallback((function(e){e&&c((function(n){return n.filter((function(n){return e!==n.element}))}))}),[]);return t.createElement(r.Provider,{value:n.useMemo((function(){return{descendants:i,registerDescendant:u,unregisterDescendant:s}}),[i,u,s])},a)},exports.createDescendantContext=function(e,n){return void 0===n&&(n={}),r.createNamedContext(e,o({descendants:[],registerDescendant:r.noop,unregisterDescendant:r.noop},n))},exports.useDescendant=function(e,t,a){var i=n.useState()[1],c=n.useContext(t),u=c.registerDescendant,s=c.unregisterDescendant,l=c.descendants;return r.useIsomorphicLayoutEffect((function(){return e.element||i({}),u(o(o({},e),{},{index:a})),function(){return s(e.element)}}),[].concat(Object.values(e))),null!=a?a:l.findIndex((function(n){return n.element===e.element}))},exports.useDescendantKeyDown=function(e,t){var r=n.useContext(e).descendants,o=t.callback,a=t.currentIndex,i=t.filter,c=t.key,u=void 0===c?"index":c,s=t.orientation,l=void 0===s?"vertical":s,f=t.rotate,d=void 0===f||f,v=t.rtl,p=void 0!==v&&v,D=null!=a?a:-1;return function(e){if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(e.key)){var n=i?r.filter(i):r;if(i&&(D=n.findIndex((function(e){return e.index===a}))),n.length)switch(e.key){case"ArrowDown":if("vertical"===l||"both"===l){e.preventDefault();var t=g();o("option"===u?t:t[u])}break;case"ArrowUp":if("vertical"===l||"both"===l){e.preventDefault();var c=b();o("option"===u?c:c[u])}break;case"ArrowLeft":if("horizontal"===l||"both"===l){e.preventDefault();var s=(p?g:b)();o("option"===u?s:s[u])}break;case"ArrowRight":if("horizontal"===l||"both"===l){e.preventDefault();var f=(p?b:g)();o("option"===u?f:f[u])}break;case"PageUp":e.preventDefault();var v=(e.ctrlKey?b:w)();o("option"===u?v:v[u]);break;case"Home":e.preventDefault();var x=w();o("option"===u?x:x[u]);break;case"PageDown":e.preventDefault();var h=(e.ctrlKey?g:k)();o("option"===u?h:h[u]);break;case"End":e.preventDefault();var m=k();o("option"===u?m:m[u])}}function g(){return D===n.length-1?d?w():n[D]:n[(D+1)%n.length]}function b(){return 0===D?d?k():n[D]:n[(D-1+n.length)%n.length]}function w(){return n[0]}function k(){return n[n.length-1]}}},exports.useDescendants=function(e){return n.useContext(e).descendants},exports.useDescendantsInit=function(){return n.useState([])};
//# sourceMappingURL=descendants.cjs.production.min.js.map
