"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),n=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;require("prop-types");var a=require("@reach/descendants"),r=require("@reach/utils"),o=require("@reach/auto-id");function d(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=e[n]);return r}var i,s,c=a.createDescendantContext("TabsDescendantsContext"),u=a.createDescendantContext("TabPanelDescendantsContext"),l=r.createNamedContext("TabsContext",{});(i=exports.TabsKeyboardActivation||(exports.TabsKeyboardActivation={})).Auto="auto",i.Manual="manual",(s=exports.TabsOrientation||(exports.TabsOrientation={})).Horizontal="horizontal",s.Vertical="vertical";var f=r.forwardRefWithAs((function(e,i){var s,u=e.as,f=void 0===u?"div":u,b=e.children,v=e.defaultIndex,x=e.orientation,h=void 0===x?exports.TabsOrientation.Horizontal:x,p=e.index,m=void 0===p?void 0:p,I=e.keyboardActivation,y=void 0===I?exports.TabsKeyboardActivation.Auto:I,T=e.onChange,C=e.readOnly,R=void 0!==C&&C,k=d(e,["as","children","defaultIndex","orientation","index","keyboardActivation","onChange","readOnly"]),E=t.useRef(null!=m);r.useControlledSwitchWarning(m,"index","Tabs");var A=o.useId(k.id),D=null!==(s=k.id)&&void 0!==s?s:r.makeId("tabs",A),w=t.useRef(!1),O=t.useRef(null),S=t.useRef(!1),K=r.useControlledState(m,null!=v?v:0),g=K[0],F=K[1],P=t.useState(-1),j=P[0],W=P[1],M=a.useDescendants(),q=M[0],L=M[1],z=t.useMemo((function(){return{focusedIndex:j,id:D,isControlled:E.current,isRTL:S,keyboardActivation:y,onFocusPanel:function(){var e;null===(e=O.current)||void 0===e||e.focus()},onSelectTab:R?r.noop:function(e){w.current=!0,T&&T(e),F(e)},onSelectTabWithKeyboard:R?r.noop:function(e){var t;switch(w.current=!0,y){case exports.TabsKeyboardActivation.Manual:return void(null===(t=q[e].element)||void 0===t||t.focus());case exports.TabsKeyboardActivation.Auto:default:return T&&T(e),void F(e)}},orientation:h,selectedIndex:g,selectedPanelRef:O,setFocusedIndex:W,setSelectedIndex:F,userInteractedRef:w}}),[j,D,y,T,h,R,g,F,q]);return t.useEffect((function(){return r.checkStyles("tabs")}),[]),n.createElement(a.DescendantProvider,{context:c,items:q,set:L},n.createElement(l.Provider,{value:z},n.createElement(f,Object.assign({},k,{ref:i,"data-reach-tabs":"","data-orientation":h,id:k.id}),r.isFunction(b)?b({focusedIndex:j,id:D,selectedIndex:g}):b)))})),b=r.forwardRefWithAs((function(e,o){var i=e.children,s=e.as,u=void 0===s?"div":s,f=e.onKeyDown,b=d(e,["children","as","onKeyDown"]),v=t.useContext(l),x=v.focusedIndex,h=v.isControlled,p=v.isRTL,m=v.keyboardActivation,I=v.onSelectTabWithKeyboard,y=v.orientation,T=v.selectedIndex,C=v.setSelectedIndex,R=t.useContext(c).descendants,k=t.useRef(null),E=r.useForkedRef(o,k);t.useEffect((function(){k.current&&(k.current.ownerDocument&&"rtl"===k.current.ownerDocument.dir||"rtl"===r.getElementComputedStyle(k.current,"direction"))&&(p.current=!0)}),[p]);var A=r.useEventCallback(r.wrapEvent(f,a.useDescendantKeyDown(c,{currentIndex:m===exports.TabsKeyboardActivation.Manual?x:T,orientation:y,rotate:!0,callback:I,filter:function(e){return!e.disabled},rtl:p.current})));return r.useIsomorphicLayoutEffect((function(){var e;if(!h&&r.boolOrBoolString(null===(e=R[T])||void 0===e?void 0:e.disabled)){var t=R.find((function(e){return!e.disabled}));t&&C(t.index)}}),[R,h,T,C]),n.createElement(u,Object.assign({role:"tablist","aria-orientation":y},b,{"data-reach-tab-list":"",ref:E,onKeyDown:A}),t.Children.map(i,(function(e,t){return r.cloneValidElement(e,{isSelected:t===T})})))})),v=t.memo(b),x=r.forwardRefWithAs((function(e,o){var i=e.children,s=e.as,u=void 0===s?"button":s,f=e.disabled,b=e.onFocus,v=d(e,["children","isSelected","as","disabled","onBlur","onFocus"]),x=t.useContext(l),h=x.id,p=x.onSelectTab,m=x.orientation,I=x.selectedIndex,y=x.userInteractedRef,T=x.setFocusedIndex,C=t.useRef(null),R=r.useForkedRef(o,C),k=a.useDescendant({element:C.current,context:c,disabled:!!f}),E=k===I;r.useUpdateEffect((function(){E&&C.current&&y.current&&(y.current=!1,C.current.focus())}),[E]);var A=r.useEventCallback(r.wrapEvent(b,(function(){T(k)}))),D=r.useEventCallback(r.wrapEvent(b,(function(){T(-1)})));return n.createElement(u,Object.assign({"aria-controls":r.makeId(h,"panel",k),"aria-disabled":f,"aria-selected":E,role:"tab",tabIndex:E?0:-1},v,{ref:R,"data-reach-tab":"","data-orientation":m,"data-selected":E?"":void 0,disabled:f,id:r.makeId(h,"tab",k),onClick:function(){p(k)},onFocus:A,onBlur:D}),i)})),h=r.forwardRefWithAs((function(e,o){var i=e.children,s=e.as,c=void 0===s?"div":s,l=d(e,["children","as"]),f=t.useRef(),b=r.useForkedRef(f,o),v=a.useDescendants();return n.createElement(a.DescendantProvider,{context:u,items:v[0],set:v[1]},n.createElement(c,Object.assign({},l,{ref:b,"data-reach-tab-panels":""}),i))})),p=t.memo(h),m=r.forwardRefWithAs((function(e,o){var i=e.children,s=e.as,c=void 0===s?"div":s,f=d(e,["children","aria-label","as"]),b=t.useContext(l),v=b.selectedPanelRef,x=b.selectedIndex,h=b.id,p=t.useRef(null),m=a.useDescendant({element:p.current,context:u}),I=m===x,y=r.makeId(h,"panel",m),T=r.useForkedRef(o,p,I?v:null);return n.createElement(c,Object.assign({"aria-labelledby":r.makeId(h,"tab",m),hidden:!I,role:"tabpanel",tabIndex:I?0:-1},f,{ref:T,"data-reach-tab-panel":"",id:y}),i)}));exports.Tab=x,exports.TabList=v,exports.TabPanel=m,exports.TabPanels=p,exports.Tabs=f,exports.useTabsContext=function(){var e=t.useContext(l),n=e.focusedIndex,a=e.id,r=e.selectedIndex;return t.useMemo((function(){return{focusedIndex:n,id:a,selectedIndex:r}}),[n,a,r])};
//# sourceMappingURL=tabs.cjs.production.min.js.map
