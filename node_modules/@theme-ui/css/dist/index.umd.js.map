{"version":3,"file":"index.umd.js","sources":["../src/index.ts"],"sourcesContent":["import * as CSS from 'csstype'\n\nimport { SystemStyleObject, UseThemeFunction, Theme } from './types'\n\nexport * from './types'\n\nexport function get(\n  obj: object,\n  key: string | number,\n  def?: unknown,\n  p?: number,\n  undef?: unknown\n): any {\n  const path = key && typeof key === 'string' ? key.split('.') : [key]\n  for (p = 0; p < path.length; p++) {\n    obj = obj ? (obj as any)[path[p]] : undef\n  }\n  return obj === undef ? def : obj\n}\n\nconst defaultBreakpoints = [40, 52, 64].map(n => n + 'em')\n\nconst defaultTheme = {\n  space: [0, 4, 8, 16, 32, 64, 128, 256, 512],\n  fontSizes: [12, 14, 16, 20, 24, 32, 48, 64, 72],\n}\n\nconst aliases = {\n  bg: 'backgroundColor',\n  m: 'margin',\n  mt: 'marginTop',\n  mr: 'marginRight',\n  mb: 'marginBottom',\n  ml: 'marginLeft',\n  mx: 'marginX',\n  my: 'marginY',\n  p: 'padding',\n  pt: 'paddingTop',\n  pr: 'paddingRight',\n  pb: 'paddingBottom',\n  pl: 'paddingLeft',\n  px: 'paddingX',\n  py: 'paddingY',\n} as const\ntype Aliases = typeof aliases\n\nexport const multiples = {\n  marginX: ['marginLeft', 'marginRight'],\n  marginY: ['marginTop', 'marginBottom'],\n  paddingX: ['paddingLeft', 'paddingRight'],\n  paddingY: ['paddingTop', 'paddingBottom'],\n  size: ['width', 'height'],\n}\n\nexport const scales = {\n  color: 'colors',\n  backgroundColor: 'colors',\n  borderColor: 'colors',\n  caretColor: 'colors',\n  opacity: 'opacities',\n  margin: 'space',\n  marginTop: 'space',\n  marginRight: 'space',\n  marginBottom: 'space',\n  marginLeft: 'space',\n  marginX: 'space',\n  marginY: 'space',\n  padding: 'space',\n  paddingTop: 'space',\n  paddingRight: 'space',\n  paddingBottom: 'space',\n  paddingLeft: 'space',\n  paddingX: 'space',\n  paddingY: 'space',\n  top: 'space',\n  right: 'space',\n  bottom: 'space',\n  left: 'space',\n  gridGap: 'space',\n  gridColumnGap: 'space',\n  gridRowGap: 'space',\n  gap: 'space',\n  columnGap: 'space',\n  rowGap: 'space',\n  fontFamily: 'fonts',\n  fontSize: 'fontSizes',\n  fontWeight: 'fontWeights',\n  lineHeight: 'lineHeights',\n  letterSpacing: 'letterSpacings',\n  border: 'borders',\n  borderTop: 'borders',\n  borderRight: 'borders',\n  borderBottom: 'borders',\n  borderLeft: 'borders',\n  borderWidth: 'borderWidths',\n  borderStyle: 'borderStyles',\n  borderRadius: 'radii',\n  borderTopRightRadius: 'radii',\n  borderTopLeftRadius: 'radii',\n  borderBottomRightRadius: 'radii',\n  borderBottomLeftRadius: 'radii',\n  borderTopWidth: 'borderWidths',\n  borderTopColor: 'colors',\n  borderTopStyle: 'borderStyles',\n  borderBottomWidth: 'borderWidths',\n  borderBottomColor: 'colors',\n  borderBottomStyle: 'borderStyles',\n  borderLeftWidth: 'borderWidths',\n  borderLeftColor: 'colors',\n  borderLeftStyle: 'borderStyles',\n  borderRightWidth: 'borderWidths',\n  borderRightColor: 'colors',\n  borderRightStyle: 'borderStyles',\n  outlineColor: 'colors',\n  boxShadow: 'shadows',\n  textShadow: 'shadows',\n  zIndex: 'zIndices',\n  width: 'sizes',\n  minWidth: 'sizes',\n  maxWidth: 'sizes',\n  height: 'sizes',\n  minHeight: 'sizes',\n  maxHeight: 'sizes',\n  flexBasis: 'sizes',\n  size: 'sizes',\n  // svg\n  fill: 'colors',\n  stroke: 'colors',\n} as const\ntype Scales = typeof scales\n\nconst positiveOrNegative = (scale: object, value: string | number) => {\n  if (typeof value !== 'number' || value >= 0) {\n    if (typeof value === 'string' && value.startsWith('-')) {\n      const valueWithoutMinus = value.substring(1)\n      const n = get(scale, valueWithoutMinus, valueWithoutMinus)\n      return `-${n}`\n    }\n    return get(scale, value, value)\n  }\n  const absolute = Math.abs(value)\n  const n = get(scale, absolute, absolute)\n  if (typeof n === 'string') return '-' + n\n  return Number(n) * -1\n}\n\nconst transforms = [\n  'margin',\n  'marginTop',\n  'marginRight',\n  'marginBottom',\n  'marginLeft',\n  'marginX',\n  'marginY',\n  'top',\n  'bottom',\n  'left',\n  'right',\n].reduce(\n  (acc, curr) => ({\n    ...acc,\n    [curr]: positiveOrNegative,\n  }),\n  {}\n)\n\nconst responsive = (styles: Exclude<SystemStyleObject, UseThemeFunction>) => (\n  theme?: Theme\n) => {\n  const next: Exclude<SystemStyleObject, UseThemeFunction> = {}\n  const breakpoints =\n    (theme && (theme.breakpoints as string[])) || defaultBreakpoints\n  const mediaQueries = [\n    null,\n    ...breakpoints.map(n => `@media screen and (min-width: ${n})`),\n  ]\n\n  for (const key in styles) {\n    const value =\n      typeof styles[key] === 'function' ? styles[key](theme) : styles[key]\n\n    if (value == null) continue\n    if (!Array.isArray(value)) {\n      next[key] = value\n      continue\n    }\n    for (let i = 0; i < value.slice(0, mediaQueries.length).length; i++) {\n      const media = mediaQueries[i]\n      if (!media) {\n        next[key] = value[i]\n        continue\n      }\n      next[media] = next[media] || {}\n      if (value[i] == null) continue\n      next[media][key] = value[i]\n    }\n  }\n\n  return next\n}\n\ntype CssPropsArgument = { theme: Theme } | Theme\n\nexport const css = (args: SystemStyleObject = {}) => (\n  props: CssPropsArgument = {}\n): CSS.Properties => {\n  const theme: Theme = {\n    ...defaultTheme,\n    ...('theme' in props ? props.theme : props),\n  }\n  let result = {}\n  const obj = typeof args === 'function' ? args(theme) : args\n  const styles = responsive(obj)(theme)\n\n  for (const key in styles) {\n    const x = styles[key]\n    const val = typeof x === 'function' ? x(theme) : x\n\n    if (key === 'variant') {\n      const variant = css(get(theme, val))(theme)\n      result = { ...result, ...variant }\n      continue\n    }\n\n    if (val && typeof val === 'object') {\n      result[key] = css(val)(theme)\n      continue\n    }\n\n    const prop = key in aliases ? aliases[key as keyof Aliases] : key\n    const scaleName = prop in scales ? scales[prop as keyof Scales] : undefined\n    const scale = get(theme, scaleName as any, get(theme, prop, {}))\n    const transform: any = get(transforms, prop, get)\n    const value = transform(scale, val, val)\n\n    if (multiples[prop]) {\n      const dirs = multiples[prop]\n\n      for (let i = 0; i < dirs.length; i++) {\n        result[dirs[i]] = value\n      }\n    } else {\n      result[prop] = value\n    }\n  }\n\n  return result\n}\n"],"names":["get","obj","key","def","p","undef","path","split","length","const","defaultBreakpoints","map","n","defaultTheme","space","fontSizes","aliases","bg","m","mt","mr","mb","ml","mx","my","pt","pr","pb","pl","px","py","multiples","marginX","marginY","paddingX","paddingY","size","scales","color","backgroundColor","borderColor","caretColor","opacity","margin","marginTop","marginRight","marginBottom","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","top","right","bottom","left","gridGap","gridColumnGap","gridRowGap","gap","columnGap","rowGap","fontFamily","fontSize","fontWeight","lineHeight","letterSpacing","border","borderTop","borderRight","borderBottom","borderLeft","borderWidth","borderStyle","borderRadius","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","borderBottomLeftRadius","borderTopWidth","borderTopColor","borderTopStyle","borderBottomWidth","borderBottomColor","borderBottomStyle","borderLeftWidth","borderLeftColor","borderLeftStyle","borderRightWidth","borderRightColor","borderRightStyle","outlineColor","boxShadow","textShadow","zIndex","width","minWidth","maxWidth","height","minHeight","maxHeight","flexBasis","fill","stroke","positiveOrNegative","scale","value","startsWith","valueWithoutMinus","substring","absolute","Math","abs","Number","transforms","reduce","acc","curr","responsive","styles","theme","next","breakpoints","mediaQueries","Array","isArray","let","i","slice","media","css","args","props","result","x","val","variant","prop","scaleName","undefined","transform","dirs"],"mappings":"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"}